# fetch 를 사용하여 open API 로 부터 데이터 가져오기

- nodejs, 표준 Javascript 에서는 직접 fetch 를 사용하여 데이터를 요청하거나 하여도 별 문제가 없다.
- React 에서는 컴포넌트에서 직접 fetch 를 통하여 데이터를 요청하는 코드를 작성하면 안된다
- React 에서는 여러가지 이슈(화면 reRendering)가 있어서 적절한 시기와 방법을 조절해 주어야 한다.
- React 에서는 컴포넌트 생명주기(life Cycle) 라는 개념이 있다.

## 컴포넌트 생명주기

- 컴포넌트가 만들어질 때
- 컴포넌트가 parents 컴포넌트에 연결될 때
- 컴포넌트가 실제 Rendering 될 때
- 컴포넌트 사용이 종료되었을 때

## 컴포넌트 생명주기를 주목해야 하는 이유

- 외부 API 나 DB 로부터 데이터를 Fetch 할때, 화면에 보여줄 컴포넌트에 데이터를 연결하여 rendering 을 시도하는데, 아직 데이터가 준비가 덜 되거나 했음에도 불구하고 rendering 을 시도하면, React null 또는 undefined 인 데이터를 대상으로 화면을 rendering 하려고 할 것이다
- 이러한 상황이 되면, 여러가지 문제를 일으킬수 있다
- 적절한 생명주기 과정에서 데이터를 fetch 하고, rendering 되도록 준비를 해야 하기 때문에 관심있게 주목해야 한다.
- 클래스 방식의 React 코딩에서는 초기 약 12가지 생명주기를 모두 이해해야만 적절한 동작으로 보장하는 코드를 작성할수 있었다.
- 최신 클래스 방식에서는 약 6가지 정도로 생명주기가 단축되었고,
- 함수 방식에서는 `useEffect()` 를 포함한 3가지 정보의 함수만 잘 이해하면 비교적 쉽게 관리가 가능하다

### useEffect() 함수의 사용법

- 화면 rendering 과 관련된 event 를 관리하는 함수
- 데이터가져오기(API, DB, Server 로 부터), 구독설정, 수동으로 DOM(HTML 등)을 수정하는 것 이러한 모든것을 side effect 라고 한다.
- side effect 가 발생하면, 예기치 못한 화면 rendering 이 발생할 수 있다.
- 예를 들면, 화면에 이미 일부 데이터가 표현된 상태에서 fetch 를 이용하여 가져온 데이터가 뒤늦게 도착했을때, 도착한 데이터를 state 변수에 setting 하면 React 는 state 변수가 변화 되었다는 것을 감지하고 다시 화면을 그리려고 시도할 것이다.
- side effect 가 발생할 수 있는 코드는 useEffect() 함수 내에서 실행하자
